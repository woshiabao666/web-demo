<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo01</title>
    <script src="../js/vue.js"></script>
    <script src="../js/axios.js"></script>
<!--    <link rel="stylesheet" href="../element-ui/index.css">-->
<!--    <script src="../element-ui/index.js"/>-->
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
</head>
<body>
<div id = "app" style="height: 100%">
    <div>
        <button @click="getMessage">查询</button>
    </div>
    <template>
        <el-table
                :data="tableData"
                border
                style="width: 100%">
            <el-table-column
                    fixed
                    prop="hireDate"
                    label="日期"
                    width="150">
            </el-table-column>
            <el-table-column
                    prop="lastName"
                    label="姓名"
                    width="120">
            </el-table-column>
            <el-table-column
                    prop="email"
                    label="省份"
                    width="120">
            </el-table-column>
            <el-table-column
                    prop="salary"
                    label="薪水"
                    width="120">
            </el-table-column>
            <el-table-column
                    prop="jobId"
                    label="地址"
                    width="1200">
            </el-table-column>
            <el-table-column
                    fixed="right"
                    label="操作"
                    width="100">
                <template slot-scope="scope">
                    <el-button @click="handleClick(scope.row)" type="text" size="small">查看</el-button>
                    <el-button type="text" size="small">编辑</el-button>
                </template>
            </el-table-column>
        </el-table>
    </template>


        <el-footer>
            <el-pagination
                    :page-size=pageInfo.pageSize
                    layout="prev, pager, next"
                    :total=pageInfo.total
                    @current-change="handleCurrentChange"
            >
            </el-pagination>

        </el-footer>
    </el-container>

</div>
</body>


<script>
    var valueObj = new Vue({
        el:'#app',
        data:{
            tableData: [{
                hireDate: '2016-05-02',
                lastName: '王小虎',
                email: '上海',
                salary: '普陀区',
                jobId: '上海市普陀区金沙江路 1518 弄',
                zip: 200333
            }],
            pageInfo: {
                pageNum: 1,
                pageSize: 10,
                total: 0
            }
        },
        methods:{
            getMessage:function () {
                axios.get("http://localhost:8089/demo01",{
                    params:{
                        pageNum:valueObj.pageInfo.pageNum,
                        pageSize: valueObj.pageInfo.pageSize
                    }
                }).then(function (resp) {
                    console.log(resp);
                    valueObj.tableData = Array.from(resp.data.list);
                    valueObj.pageInfo.total = resp.data.total;
                    valueObj.pageInfo.pageNum = resp.data.pageNum;
                    valueObj.pageInfo.pageSize = resp.data.pageSize


                },function (err) {
                    console.log(err)
                })
            },
            handleCurrentChange(val){
                valueObj.pageInfo.pageNum = val;
                this.getMessage();
            },
            handleClick(val){

            }
        },

        computed:{

        }
    });

</script>
<style>
    .el-header, .el-footer {
        background-color: #B3C0D1;
        color: #333;
        text-align: center;
        line-height: 60px;
    }

    .el-aside {
        background-color: #D3DCE6;
        color: #333;
        text-align: center;
        line-height: 200px;
    }

    .el-main {
        background-color: #E9EEF3;
        color: #333;
        text-align: center;
        line-height: 200px;
    }






</style>

</html>

